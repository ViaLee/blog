<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | ğŸ’«Viaã®blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/babe.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.a509abab.css" as="style"><link rel="preload" href="/assets/js/app.6a1e7b57.js" as="script"><link rel="preload" href="/assets/js/2.f7f94fda.js" as="script"><link rel="preload" href="/assets/js/23.0e11ca0d.js" as="script"><link rel="prefetch" href="/assets/js/10.94991a2c.js"><link rel="prefetch" href="/assets/js/11.dc2a681f.js"><link rel="prefetch" href="/assets/js/12.8ba7a12f.js"><link rel="prefetch" href="/assets/js/13.515533ed.js"><link rel="prefetch" href="/assets/js/14.45f6d6ea.js"><link rel="prefetch" href="/assets/js/15.a540c83c.js"><link rel="prefetch" href="/assets/js/16.01649045.js"><link rel="prefetch" href="/assets/js/17.49ac8e1a.js"><link rel="prefetch" href="/assets/js/18.2fc85019.js"><link rel="prefetch" href="/assets/js/19.eab16a2f.js"><link rel="prefetch" href="/assets/js/20.656e1424.js"><link rel="prefetch" href="/assets/js/21.d475564f.js"><link rel="prefetch" href="/assets/js/22.fbce710a.js"><link rel="prefetch" href="/assets/js/3.36e6c52f.js"><link rel="prefetch" href="/assets/js/4.dbbfc7ac.js"><link rel="prefetch" href="/assets/js/5.1efdb115.js"><link rel="prefetch" href="/assets/js/6.6feef2bf.js"><link rel="prefetch" href="/assets/js/7.4b590157.js"><link rel="prefetch" href="/assets/js/8.74f87bb3.js"><link rel="prefetch" href="/assets/js/9.623af976.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a509abab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/babe.png" alt="ğŸ’«Viaã®blog" class="logo"> <span class="site-name can-hide">ğŸ’«Viaã®blog</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Basic ğŸ³" class="dropdown-title"><span class="title">Basic ğŸ³</span> <span class="arrow down"></span></button> <button type="button" aria-label="Basic ğŸ³" class="mobile-dropdown-title"><span class="title">Basic ğŸ³</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/javascript.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/pages/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/pages/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/pages/webpack.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web ğŸŒ" class="dropdown-title"><span class="title">Web ğŸŒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web ğŸŒ" class="mobile-dropdown-title"><span class="title">Web ğŸŒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/http.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/pages/security.html" class="nav-link">
  å®‰å…¨
</a></li><li class="dropdown-item"><!----> <a href="/pages/browser.html" class="nav-link">
  æµè§ˆå™¨
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog âœğŸ»" class="dropdown-title"><span class="title">Blog âœğŸ»</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog âœğŸ»" class="mobile-dropdown-title"><span class="title">Blog âœğŸ»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/interview.html" class="nav-link">
  é¢è¯• ğŸ“–
</a></li><li class="dropdown-item"><!----> <a href="/pages/blog.html" class="nav-link">
  åšå®¢ âœğŸ»
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Basic ğŸ³" class="dropdown-title"><span class="title">Basic ğŸ³</span> <span class="arrow down"></span></button> <button type="button" aria-label="Basic ğŸ³" class="mobile-dropdown-title"><span class="title">Basic ğŸ³</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/javascript.html" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/pages/react.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/pages/css.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/pages/webpack.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web ğŸŒ" class="dropdown-title"><span class="title">Web ğŸŒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web ğŸŒ" class="mobile-dropdown-title"><span class="title">Web ğŸŒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/http.html" class="nav-link">
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/pages/security.html" class="nav-link">
  å®‰å…¨
</a></li><li class="dropdown-item"><!----> <a href="/pages/browser.html" class="nav-link">
  æµè§ˆå™¨
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog âœğŸ»" class="dropdown-title"><span class="title">Blog âœğŸ»</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog âœğŸ»" class="mobile-dropdown-title"><span class="title">Blog âœğŸ»</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/interview.html" class="nav-link">
  é¢è¯• ğŸ“–
</a></li><li class="dropdown-item"><!----> <a href="/pages/blog.html" class="nav-link">
  åšå®¢ âœğŸ»
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/webpack.html#module" class="sidebar-link">module</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/webpack.html#chunk-å’Œ-bundle" class="sidebar-link">chunk å’Œ bundle</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/webpack.html#é…ç½®" class="sidebar-link">é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/webpack.html#pathå’Œpublicpath" class="sidebar-link">pathå’ŒpublicPath</a></li></ul></li><li><a href="/pages/webpack.html#plugin-å’Œ-loader" class="sidebar-link">plugin å’Œ loader</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/webpack.html#æ‰“åŒ…æµç¨‹" class="sidebar-link">æ‰“åŒ…æµç¨‹</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/webpack.html#split-chunks" class="sidebar-link">Split Chunks</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/webpack.html#tree-shaking" class="sidebar-link">Tree Shaking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/webpack.html#dce" class="sidebar-link">DCE</a></li><li class="sidebar-sub-header"><a href="/pages/webpack.html#å¦‚ä½•é…ç½®" class="sidebar-link">å¦‚ä½•é…ç½®</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h1> <p>æœ¬è´¨æ˜¯ä¸€ä¸ªç°ä»£ js åº”ç”¨ç¨‹åºé™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œå½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œä¼šé€’å½’çš„åˆ›å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼ŒåŒ…å«éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p> <h2 id="module"><a href="#module" class="header-anchor">#</a> module</h2> <p>ESModuleï¼ŒcommenJsï¼ŒAMDï¼ŒAssets<br> <code>ES6 module</code> ç‰¹ç‚¹ï¼š</p> <ul><li>åªèƒ½ä½œä¸ºæ¨¡å—é¡¶å±‚çš„è¯­å¥å‡ºç°</li> <li>import çš„æ¨¡å—ååªèƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡</li> <li>import binding æ˜¯ immutable çš„</li></ul> <p><strong>å¼•å…¥æ–¹å¼</strong>ï¼š<br> <strong><code>ESModule</code></strong>ï¼šexportï¼Œimport<br> <strong><code>commenJs</code></strong>ï¼šmodule.exportsï¼Œrequire</p> <h2 id="chunk-å’Œ-bundle"><a href="#chunk-å’Œ-bundle" class="header-anchor">#</a> chunk å’Œ bundle</h2> <p><strong><code>chunk</code></strong>: æ‰“åŒ…è¿‡ç¨‹ä¸­ modules çš„é›†åˆ
ä»å…¥å£æ¨¡å—å¼€å§‹ï¼Œå¼•å…¥å…¶ä»–æ¨¡å—...é€šè¿‡å¼•å…¥å…³ç³»é€ä¸ªæ‰“åŒ…ï¼Œè¿™äº› module å°±å½¢æˆäº†ä¸€ä¸ª chunkã€‚<br>
å¦‚æœæœ‰å¤šä¸ªå…¥å£ï¼Œä¼šäº§å‡ºå¤šæ¡æ‰“åŒ…è·¯å¾„ï¼Œæ¯æ¡è·¯å¾„ä¼šå½¢æˆä¸€ä¸ª chunkã€‚<br> <strong><code>bundle</code></strong>ï¼šæœ€ç»ˆè¾“å‡ºçš„ä¸€ä¸ªæˆ–å¤šä¸ªæ‰“åŒ…å¥½çš„æ–‡ä»¶<br> <strong>chunk å’Œ bundle çš„å…³ç³»</strong>ï¼š<br>
å¤§å¤šæ•°æƒ…å†µ ä¸€ä¸ª chunk ä¼šäº§ç”Ÿä¸€ä¸ª bundleï¼Œä½†æ˜¯æœ‰ä¾‹å¤–</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    index<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">//å…¥å£æ–‡ä»¶</span>
    <span class="token comment">//index: ['./src/index.js','./src/add.js']   //å¤šä¸ªå…¥å£ï¼Œä¸€ä¸ªchunk</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/*
  entry:{  //å¤šä¸ªchunk
    index: './src/index.js'    
    common:'./src/common.js'
  },
  */</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// è¾“å‡ºbundleçš„æ–‡ä»¶å</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span> <span class="token comment">// è¾“å‡ºæºä»£ç </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="é…ç½®"><a href="#é…ç½®" class="header-anchor">#</a> é…ç½®</h2> <h3 id="pathå’Œpublicpath"><a href="#pathå’Œpublicpath" class="header-anchor">#</a> pathå’ŒpublicPath</h3> <p>åŒºåˆ«ï¼š<br>
path: è¾“å‡ºæ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼ˆä½¿ç”¨ Node.js çš„ path æ¨¡å—ï¼‰<br>
publicPath: è¯»å–æ–‡ä»¶ç›®å½•ï¼Œurl ç›¸å¯¹äº HTML é¡µé¢ã€‚å¸¸ç”¨æ¥è®¾ç½®èµ„æºè¯·æ±‚å‰ç¼€ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
      path<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span>
      publicPath<span class="token operator">:</span> <span class="token string">'dist/'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="plugin-å’Œ-loader"><a href="#plugin-å’Œ-loader" class="header-anchor">#</a> plugin å’Œ loader</h2> <p><strong><code>loader</code></strong>ï¼šæ¨¡å—è½¬æ¢å™¨ã€‚<br>
å°†é js æ¨¡å—è½¬åŒ–ä¸º webpack èƒ½è¯†åˆ«çš„ js æ¨¡å—ï¼Œå°† A.less è½¬æ¢ä¸º A.cssã€‚<br>
webpack è‡ªèº«åªæ”¯æŒ js å’Œ json è¿™ä¸¤ç§æ ¼å¼çš„æ–‡ä»¶ã€‚<br>
loader çš„æ‰§è¡Œé¡ºåºå’Œé…ç½®ä¸­çš„é¡ºåºæ˜¯ç›¸åçš„ï¼Œå³æœ€åä¸€ä¸ª loader æœ€å…ˆæ‰§è¡Œï¼Œç¬¬ä¸€ä¸ª loader æœ€åæ‰§è¡Œã€‚ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„ loader æ¥æ”¶æºæ–‡ä»¶å†…å®¹ä½œä¸ºå‚æ•°ï¼Œå…¶å®ƒ loader æ¥æ”¶å‰ä¸€ä¸ªæ‰§è¡Œçš„ loader çš„è¿”å›å€¼ä½œä¸ºå‚æ•°ï¼Œæœ€åæ‰§è¡Œçš„ loader ä¼šè¿”å›æ­¤æ¨¡å—çš„ JavaScript æºç ã€‚<br> <strong>æœ¬è´¨</strong>ï¼šå°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸ºåº”ç”¨ç¨‹åºçš„ä¾èµ–å›¾å¯ç›´æ¥å¼•ç”¨çš„æ¨¡å—ã€‚<br> <strong><code>plugin</code></strong>:æ‹“å±•<br>
é’ˆå¯¹ loader ç»“æŸåï¼ŒåŸºäºäº‹ä»¶æœºåˆ¶å·¥ä½œï¼Œä¼šç›‘å¬ webpack æ‰“åŒ…è¿‡ç¨‹ä¸­çš„æŸäº›èŠ‚ç‚¹ã€‚
åœ¨ webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼Œplugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚<br> <strong><code>compliation</code></strong>ï¼šåŒ…å«å½“å‰æ¨¡å—èµ„æºï¼Œç¼–è¯‘ç”Ÿæˆèµ„æºï¼Œwebpack å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼Œå½“æ£€æµ‹åˆ°ä»»æ„ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œéƒ½ä¼šåˆ›å»ºä¸€æ¬¡æ–°çš„ compliation</p> <h2 id="æ‰“åŒ…æµç¨‹"><a href="#æ‰“åŒ…æµç¨‹" class="header-anchor">#</a> æ‰“åŒ…æµç¨‹</h2> <ol><li>åˆå§‹åŒ–å‚æ•°ï¼šshell weback.config.js</li> <li>å¼€å§‹ç¼–è¯‘ï¼šï¼ˆå¯åŠ¨ webpackï¼‰ï¼šåˆå§‹åŒ–ä¸€ä¸ª compiler å¯¹è±¡ï¼ŒåŠ è½½é…ç½®ï¼Œå¼€å§‹æ‰§è¡Œç¼–è¯‘<br>
compiler å¯¹è±¡:å…¨å±€å”¯ä¸€ï¼Œæ˜¯ webpack çš„å®ä¾‹ï¼ŒåŒ…å«äº† webpack ç¯å¢ƒçš„æ‰€æœ‰é…ç½®ä¿¡æ¯</li> <li>ç¡®å®šå…¥å£ï¼šæ ¹æ® entry ä¸­çš„é…ç½®ï¼Œæ‰¾å‡ºæ‰€æœ‰å…¥å£æ–‡ä»¶</li> <li>ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œè°ƒç”¨æ‰€æœ‰ loaderï¼Œå†é€’å½’æ‰¾ä¾èµ–</li> <li>å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šå¾—åˆ°æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠä»–ä»¬ä¹‹é—´çš„å…³ç³»ï¼ˆä¾èµ–å›¾ï¼‰</li> <li>è¾“å‡ºèµ„æºï¼šæ ¹æ®ä¾èµ–å…³ç³»ç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ª module çš„ chunk</li> <li>è¾“å‡ºå®Œæˆï¼šæ ¹æ®é…ç½®ï¼Œç¡®å®šè¾“å‡ºçš„æ–‡ä»¶åä»¥åŠè·¯å¾„</li></ol> <h2 id="split-chunks"><a href="#split-chunks" class="header-anchor">#</a> Split Chunks</h2> <p>ä¼˜åŒ–é…ç½®</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
     mode<span class="token operator">:</span><span class="token string">'production'</span><span class="token punctuation">,</span>
     entry<span class="token operator">:</span><span class="token punctuation">{</span>
               index<span class="token operator">:</span> <span class="token string">'./src/index.js'</span>
                other<span class="token operator">:</span><span class="token string">'./src/multiply.js'</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
output<span class="token operator">:</span><span class="token punctuation">{</span>
filename<span class="token operator">:</span><span class="token string">&quot;[name].js&quot;</span>  <span class="token comment">// è¾“å‡ºbundleçš„æ–‡ä»¶å</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span><span class="token punctuation">{</span>         <span class="token comment">//ä¼˜åŒ–</span>
    runtimeChunk<span class="token operator">:</span><span class="token string">'single'</span><span class="token punctuation">,</span>   <span class="token comment">// å°†æ¨¡å—äº¤äº’æ—¶è¿æ¥æ‰€éœ€çš„åŠ è½½å’Œè§£æé€»è¾‘ææˆä¸€ä¸ªchunk</span>
    splitChunks<span class="token operator">:</span><span class="token punctuation">{</span>
      cacheGroups<span class="token operator">:</span><span class="token punctuation">{</span>
        commons<span class="token operator">:</span><span class="token punctuation">{</span>       <span class="token comment">// å…¬å…±chunkï¼Œå¦‚æœè¢«è‡³å°‘minChunksä¸ªchunk ç”¨åˆ°äº†ï¼Œå°±å•ç‹¬ææˆä¸€ä¸ªchunk</span>
          chunks<span class="token operator">:</span><span class="token string">'initial'</span><span class="token punctuation">,</span>
          minChunks<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
          minSize<span class="token operator">:</span><span class="token number">0</span>   <span class="token comment">// è¾¾åˆ°è¯¥å¤§å°æ‰ææˆä¸€ä¸ªchunk</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        vendor<span class="token operator">:</span><span class="token punctuation">{</span>    <span class="token comment">// å°†ç¬¬ä¸‰æ–¹åŒ… æ‹†å‡ºä¸€ä¸ªchunk</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>   <span class="token comment">//æ­£åˆ™ åŒ¹é…node_modulesä¸‹çš„æ–‡ä»¶</span>
          chunks<span class="token operator">:</span><span class="token string">'initial'</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span><span class="token string">'vendor'</span><span class="token punctuation">,</span>
          enforce<span class="token operator">:</span><span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree Shaking</h2> <p>ç”¨æ¥ç§»é™¤ JavaScript ä¸Šä¸‹æ–‡ä¸­çš„æœªå¼•ç”¨ä»£ç (dead-code)ï¼Œæ˜¯ DCE çš„ä¸€ç§æ–°å®ç°ï¼Œæ‰€æœ‰å¯¼å…¥æ–‡ä»¶éƒ½ä¼šå—åˆ° tree shaking çš„å½±å“ã€‚<br>
å…¶æ¶ˆé™¤åŸç†ä¾èµ–äº ES6 çš„æ¨¡å—ç‰¹æ€§ï¼ŒES6 æ¨¡å—ä¾èµ–å…³ç³»æ˜¯ç¡®å®šçš„ï¼Œå’Œè¿è¡Œæ—¶çš„çŠ¶æ€æ— å…³ï¼Œå¯ä»¥è¿›è¡Œå¯é çš„é™æ€åˆ†æï¼Œè¿™æ˜¯ tree-shaking çš„åŸºç¡€ã€‚</p> <h3 id="dce"><a href="#dce" class="header-anchor">#</a> DCE</h3> <p>Dead Code Eliminationâ€”â€”æ¶ˆé™¤æ­»ä»£ç <br>
ä¼ ç»Ÿç¼–è¯‘å‹çš„è¯­è¨€ä¸­ï¼Œéƒ½æ˜¯ç”±ç¼–è¯‘å™¨å°† Dead Code ä» ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ä¸­åˆ é™¤ï¼Œjs éœ€è¦å‹ç¼©å·¥å…· uglify åšå¤„ç†ï¼ˆwebpack è‡ªèº«é›†æˆ uglifyï¼‰ã€‚<br>
Dead Code ä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š<br>
â€¢ ä»£ç ä¸ä¼šè¢«æ‰§è¡Œ
â€¢ ä»£ç æ‰§è¡Œçš„ç»“æœä¸ä¼šè¢«ç”¨åˆ°<br>
â€¢ ä»£ç åªä¼šå½±å“æ­»å˜é‡ï¼ˆåªå†™ä¸è¯»ï¼‰</p> <h3 id="å¦‚ä½•é…ç½®"><a href="#å¦‚ä½•é…ç½®" class="header-anchor">#</a> å¦‚ä½•é…ç½®</h3> <h4 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="header-anchor">#</a> æ¡ä»¶</h4> <ol><li>ES6ï¼Œç”¨æ”¯æŒ tree-shaking çš„æ–¹å¼å†™ä»£ç </li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å…¨éƒ¨å¯¼å…¥ (ä¸æ”¯æŒ tree-shaking)</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// å…·åå¯¼å…¥(æ”¯æŒ tree-shaking)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> debounce <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;lodash&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// ç›´æ¥å¯¼å…¥å…·ä½“çš„æ¨¡å— (æ”¯æŒ tree-shaking)</span>
<span class="token keyword">import</span> debounce <span class="token keyword">from</span> <span class="token string">&quot;lodash/lib/debounce&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>å¤„äºç”Ÿäº§æ¨¡å¼ï¼Œåªæœ‰åœ¨å‹ç¼©ä»£ç çš„æ—¶å€™ä¼š tree-shaking</li></ol> <h4 id="é…ç½®-2"><a href="#é…ç½®-2" class="header-anchor">#</a> é…ç½®</h4> <ol><li>æ ‡è®°æœªå¼•ç”¨ä»£ç  â€”â€” usedExports<br>
é…ç½®<code>optimization</code>é€‰é¡¹çš„<code>usedExports: true</code>
æ‰“åŒ…ç»“æœ js ä¸­æœªå¼•ç”¨çš„ä»£ç ä¼šè¢« unused...æ³¨é‡Šï¼Œ
usedExports ä¾èµ–äº terser å»æ£€æµ‹è¯­å¥ä¸­çš„å‰¯ä½œç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>/*#__PURE__*/</code>æ³¨é‡Šæ¥å¸®å¿™ terser æ ‡è®°ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚å¦‚æœä¸€ä¸ªæ²¡è¢«ä½¿ç”¨çš„å˜é‡å®šä¹‰çš„åˆå§‹å€¼è¢«è®¤ä¸ºæ˜¯æ— å‰¯ä½œç”¨çš„ï¼ˆpureï¼‰ï¼Œå®ƒä¼šè¢«æ ‡è®°ä¸ºæ­»ä»£ç ï¼Œä¸ä¼šè¢«æ‰§è¡Œä¸”ä¼šè¢«å‹ç¼©å·¥å…·æ¸…é™¤æ‰(å½“ <code>optimization.innerGraph</code> è¢«è®¾ç½®æˆ true æ—¶ç”Ÿæ•ˆ)ã€‚</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Base Webpack Config for Tree Shaking</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
 mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
 optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
  usedExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// æ”¯æŒåˆ é™¤æ­»ä»£ç çš„å‹ç¼©å™¨ï¼Œè¯†åˆ«å‡º Webpack æ˜¯å¦‚ä½•æ ‡è®°å®ƒè®¤ä¸ºæ²¡æœ‰è¢«ä½¿ç”¨çš„ä»£ç ï¼Œå¹¶å°†å…¶å‰¥ç¦»ã€‚</span>
   <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// æ‰“åŒ…ç»“æœ</span>
<span class="token comment">/* 1 */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">/* unused harmony export square */</span>
  <span class="token comment">/* harmony export (immutable) */</span> __webpack_exports__<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> cube<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>æ ‡è®° side-effect-free æ–‡ä»¶ â€”â€” sideEffects<br>
é€šè¿‡ package.json çš„ &quot;sideEffects&quot; å±æ€§ï¼Œå£°æ˜è¯¥åŒ…æ¨¡å—æ˜¯å¦åŒ…å« sideEffects(å‰¯ä½œç”¨)ï¼Œå¦‚æœè¢«æ ‡è®°ä¸ºæ— å‰¯ä½œç”¨çš„æ¨¡å—æ²¡æœ‰è¢«ç›´æ¥å¯¼å‡ºä½¿ç”¨ï¼Œæ‰“åŒ…å·¥å…·ä¼šè·³è¿‡è¿›è¡Œæ¨¡å—çš„å‰¯ä½œç”¨åˆ†æè¯„ä¼°ã€‚</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// å¦‚æœæ‰€æœ‰ä»£ç éƒ½ä¸åŒ…å«å‰¯ä½œç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç®€å•åœ°å°†è¯¥å±æ€§æ ‡è®°ä¸º falseï¼Œæ¥å‘ŠçŸ¥ webpack å®ƒå¯ä»¥å®‰å…¨åœ°åˆ é™¤æœªç”¨åˆ°çš„ exportã€‚</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/some-side-effectful-file.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.css&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>&quot;side effect(å‰¯ä½œç”¨)&quot;æ˜¯ï¼Œåœ¨å¯¼å…¥æ—¶ä¼šæ‰§è¡Œç‰¹æ®Šè¡Œä¸ºçš„ä»£ç ï¼Œè€Œä¸æ˜¯ä»…ä»…æš´éœ²ä¸€ä¸ª export æˆ–å¤šä¸ª exportã€‚ä¸¾ä¾‹è¯´æ˜ï¼Œä¾‹å¦‚ polyfillï¼Œå®ƒå½±å“å…¨å±€ä½œç”¨åŸŸï¼Œå¹¶ä¸”é€šå¸¸ä¸æä¾› exportã€‚</p></blockquote> <blockquote><p>å‚è€ƒï¼š<br> <a href="https://juejin.cn/post/6844903998634328072" target="_blank" rel="noopener noreferrer">Webpack 4 Tree Shaking ç»ˆæä¼˜åŒ–æŒ‡å—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://webpack.docschina.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">Tree Shaking<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">11/30/2022, 10:39:48 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6a1e7b57.js" defer></script><script src="/assets/js/2.f7f94fda.js" defer></script><script src="/assets/js/23.0e11ca0d.js" defer></script>
  </body>
</html>
